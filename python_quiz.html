<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Quiz - QB QUIZ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: #000; color: white; font-family: 'Inter', sans-serif; }
        .nav-glass {
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .quiz-container { max-width: 900px; margin: 100px auto; padding: 20px; }
        .glass-panel {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
        }
        .option-btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s;
            color: #d1d5db;
        }
        .option-btn:hover:not(:disabled) { background: rgba(255,255,255,0.1); border-color: #3b82f6; }
        .option-btn.selected { background: #3b82f6; color: white; border-color: #3b82f6; }
        .option-btn.correct { background: #10b981 !important; color: white; border-color: #10b981; }
        .option-btn.incorrect { background: #ef4444 !important; color: white; border-color: #ef4444; }
        
        pre { background: #111827 !important; color: #e5e7eb !important; padding: 10px; border-radius: 6px; overflow-x: auto; }
    </style>
</head>
<body>

    <nav class="nav-glass fixed top-0 w-full z-50 px-6 py-4 flex justify-between items-center">
        <a href="index.html" class="flex items-center gap-3">
            <div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center font-bold text-xs">DS</div>
            <span class="font-bold tracking-wider">PYTHON MODULE</span>
        </a>
        <button onclick="window.location.href='index.html'" class="text-sm text-gray-400 hover:text-white">EXIT TEST</button>
    </nav>

    <div class="quiz-container">
        
        <div class="w-full bg-gray-800 rounded-full h-1.5 mb-8">
            <div id="progress-bar" class="bg-blue-600 h-1.5 rounded-full transition-all duration-500" style="width: 0%"></div>
        </div>

        <div id="question-box" class="glass-panel p-8 min-h-[400px] flex flex-col justify-between">
            <div>
                <div class="flex justify-between items-start mb-6">
                    <span class="text-blue-500 font-mono text-sm tracking-widest">QUESTION <span id="q-number">01</span></span>
                    <span class="text-gray-500 text-sm" id="q-total">/ 100</span>
                </div>
                
                <h2 id="q-text" class="text-xl md:text-2xl font-medium leading-relaxed mb-8">
                    Loading Question...
                </h2>

                <div id="options-grid" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    </div>
            </div>

            <div class="flex justify-between items-center mt-8 pt-6 border-t border-white/10">
                <button id="prev-btn" onclick="prevQuestion()" class="text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed">
                    ← Previous
                </button>
                <button id="next-btn" onclick="nextQuestion()" class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg font-medium transition-colors">
                    Next →
                </button>
            </div>
        </div>

        <div id="result-box" class="hidden glass-panel p-10 text-center">
            <h2 class="text-3xl font-bold mb-4">Module Complete</h2>
            <div class="text-6xl font-bold text-blue-500 mb-2" id="final-score">0%</div>
            <p class="text-gray-400 mb-8">Accuracy Rate</p>
            <div class="flex justify-center gap-4">
                <button onclick="location.reload()" class="bg-white text-black px-6 py-3 rounded-lg font-bold">Retry</button>
                <button onclick="window.location.href='index.html'" class="border border-white/20 px-6 py-3 rounded-lg">Home</button>
            </div>
        </div>

    </div>

    <script>
        // === YOUR QUESTIONS ARRAY HERE ===
        const questions = [
            {"No": "159", "question_text": "What arithmetic operators cannot be used with strings?", "MCQ Answer": "A", "option A": "-", "option B": "+", "option C": "*", "option D": "All of the mentioned"},
            // ... [PASTE REST OF QUESTIONS HERE] ...
        ];

        let currentIndex = 0;
        let userAnswers = new Array(questions.length).fill(null); // Store user choice for each question

        function loadQuestion(index) {
            const q = questions[index];
            
            // Update Text
            document.getElementById("q-number").textContent = (index + 1).toString().padStart(2, '0');
            document.getElementById("q-total").textContent = `/ ${questions.length}`;
            document.getElementById("q-text").innerHTML = q.question_text.replace(/\n/g, "<br>");
            
            // Progress Bar
            document.getElementById("progress-bar").style.width = `${((index + 1) / questions.length) * 100}%`;

            // Options
            const grid = document.getElementById("options-grid");
            grid.innerHTML = "";
            
            ['A', 'B', 'C', 'D'].forEach(opt => {
                const btn = document.createElement("button");
                btn.className = "option-btn text-left p-4 rounded-lg";
                btn.innerHTML = `<span class="font-bold text-blue-400 mr-2">${opt}.</span> ${q[`option ${opt}`]}`;
                
                // If user already answered this question, show state
                if (userAnswers[index]) {
                    btn.disabled = true;
                    if (opt === q['MCQ Answer']) btn.classList.add("correct");
                    else if (opt === userAnswers[index] && opt !== q['MCQ Answer']) btn.classList.add("incorrect");
                    else if (opt === userAnswers[index]) btn.classList.add("selected");
                }

                btn.onclick = () => selectOption(index, opt, q['MCQ Answer']);
                grid.appendChild(btn);
            });

            // Navigation Buttons
            document.getElementById("prev-btn").disabled = index === 0;
            document.getElementById("next-btn").textContent = index === questions.length - 1 ? "Finish" : "Next →";
            
            // Animation
            gsap.fromTo("#q-text", {opacity:0, y:10}, {opacity:1, y:0, duration:0.4});
            gsap.fromTo(".option-btn", {opacity:0, x:-10}, {opacity:1, x:0, duration:0.3, stagger:0.05});
        }

        function selectOption(qIndex, selectedOpt, correctOpt) {
            if (userAnswers[qIndex]) return; // Prevent changing answer
            userAnswers[qIndex] = selectedOpt;
            loadQuestion(qIndex); // Reload to show styles
        }

        function nextQuestion() {
            if (currentIndex < questions.length - 1) {
                currentIndex++;
                loadQuestion(currentIndex);
            } else {
                showResults();
            }
        }

        function prevQuestion() {
            if (currentIndex > 0) {
                currentIndex--;
                loadQuestion(currentIndex);
            }
        }

        function showResults() {
            document.getElementById("question-box").classList.add("hidden");
            document.getElementById("result-box").classList.remove("hidden");
            
            const correctCount = userAnswers.filter((ans, i) => ans === questions[i]['MCQ Answer']).length;
            const percentage = Math.round((correctCount / questions.length) * 100);
            
            // Animate Score
            let obj = { val: 0 };
            gsap.to(obj, {
                val: percentage,
                duration: 2,
                onUpdate: () => {
                    document.getElementById("final-score").textContent = Math.round(obj.val) + "%";
                }
            });
        }

        // Init
        loadQuestion(0);
    </script>
</body>
</html>
